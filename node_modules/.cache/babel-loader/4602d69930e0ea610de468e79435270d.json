{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar querystring_1 = require(\"querystring\");\n\nvar axios_1 = __importDefault(require(\"axios\"));\n\nvar sM_1 = __importDefault(require(\"./sM\"));\n\nvar languages_1 = require(\"./languages\");\n\nfunction token(text) {\n  return new Promise(function (resolve) {\n    resolve({\n      name: \"tk\",\n      value: sM_1.default(text)\n    });\n  });\n}\n\nvar CORSService = \"\"; // setup your own cors-anywhere server\n\nexports.setCORS = function (CORSURL) {\n  CORSService = CORSURL;\n  return translate;\n}; // function translate(text: string, to: string, from: string, tld: string) {\n\n\nfunction translate(text, opts_) {\n  if (opts_ === void 0) {\n    opts_ = {};\n  }\n\n  var opts = {\n    from: opts_.from || \"auto\",\n    to: opts_.to || \"en\",\n    raw: opts_.raw || false,\n    tld: opts_.tld || \"com\"\n  };\n  var e = null;\n  [opts.from, opts.to].forEach(function (lang) {\n    if (lang && !languages_1.isSupported(lang)) {\n      e = new Error();\n      e.message = \"The language '\" + lang + \"' is not supported\";\n    }\n  });\n\n  if (e) {\n    return new Promise(function (resolve, reject) {\n      reject(e);\n    });\n  }\n\n  return token(text).then(function (token) {\n    var _a;\n\n    var url = \"https://translate.google.\" + opts.tld + \"/translate_a/single\";\n    var data = (_a = {\n      client: \"gtx\",\n      sl: languages_1.getCode(opts.from),\n      tl: languages_1.getCode(opts.to),\n      hl: languages_1.getCode(opts.to),\n      dt: [\"at\", \"bd\", \"ex\", \"ld\", \"md\", \"qca\", \"rw\", \"rm\", \"ss\", \"t\"],\n      ie: \"UTF-8\",\n      oe: \"UTF-8\",\n      otf: 1,\n      ssel: 0,\n      tsel: 0,\n      kc: 7,\n      q: text\n    }, _a[token.name] = token.value, _a);\n    var fullUrl = url + \"?\" + querystring_1.stringify(data);\n    /*\r\n      if (fullUrl.length > 2083) {\r\n          delete data.q;\r\n          return [\r\n              url + '?' + stringify(data),\r\n              {method: 'POST', body: {q: text}}\r\n          ];\r\n      }\r\n      */\n\n    return fullUrl;\n  }).then(function (url) {\n    return axios_1.default.get(CORSService + url).then(function (res_) {\n      var res = {\n        body: JSON.stringify(res_.data)\n      };\n      var result = {\n        text: \"\",\n        pronunciation: \"\",\n        from: {\n          language: {\n            didYouMean: false,\n            iso: \"\"\n          },\n          text: {\n            autoCorrected: false,\n            value: \"\",\n            didYouMean: false\n          }\n        },\n        raw: opts.raw ? res.body : \"\"\n      };\n      var body = JSON.parse(res.body);\n      body[0].forEach(function (obj) {\n        if (obj[0]) {\n          result.text += obj[0];\n        } else if (obj[2]) {\n          result.pronunciation += obj[2];\n        }\n      });\n\n      if (body[2] === body[8][0][0]) {\n        result.from.language.iso = body[2];\n      } else {\n        result.from.language.didYouMean = true;\n        result.from.language.iso = body[8][0][0];\n      }\n\n      if (body[7] && body[7][0]) {\n        var str = body[7][0];\n        str = str.replace(/<b><i>/g, \"[\");\n        str = str.replace(/<\\/i><\\/b>/g, \"]\");\n        result.from.text.value = str;\n\n        if (body[7][5] === true) {\n          result.from.text.autoCorrected = true;\n        } else {\n          result.from.text.didYouMean = true;\n        }\n      }\n\n      return result;\n    }).catch(function (err) {\n      var e = new Error();\n\n      if (err.statusCode !== undefined && err.statusCode !== 200) {\n        e.message = \"BAD_REQUEST\";\n      } else {\n        e.message = \"BAD_NETWORK\";\n      }\n\n      throw e;\n    });\n  });\n}\n\nexports.translate = translate;\nexports.default = translate;","map":{"version":3,"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","querystring_1","require","axios_1","sM_1","languages_1","token","text","Promise","resolve","name","default","CORSService","setCORS","CORSURL","translate","opts_","opts","from","to","raw","tld","e","forEach","lang","isSupported","Error","message","reject","then","_a","url","data","client","sl","getCode","tl","hl","dt","ie","oe","otf","ssel","tsel","kc","q","fullUrl","stringify","get","res_","res","body","JSON","result","pronunciation","language","didYouMean","iso","autoCorrected","parse","obj","str","replace","catch","err","statusCode","undefined"],"sources":["/home/sayed/todolist/node_modules/google-translate-api-browser/dist/index.js"],"sourcesContent":["\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar querystring_1 = require(\"querystring\");\r\nvar axios_1 = __importDefault(require(\"axios\"));\r\nvar sM_1 = __importDefault(require(\"./sM\"));\r\nvar languages_1 = require(\"./languages\");\r\nfunction token(text) {\r\n    return new Promise(function (resolve) {\r\n        resolve({ name: \"tk\", value: sM_1.default(text) });\r\n    });\r\n}\r\nvar CORSService = \"\";\r\n// setup your own cors-anywhere server\r\nexports.setCORS = function (CORSURL) {\r\n    CORSService = CORSURL;\r\n    return translate;\r\n};\r\n// function translate(text: string, to: string, from: string, tld: string) {\r\nfunction translate(text, opts_) {\r\n    if (opts_ === void 0) { opts_ = {}; }\r\n    var opts = {\r\n        from: opts_.from || \"auto\",\r\n        to: opts_.to || \"en\",\r\n        raw: opts_.raw || false,\r\n        tld: opts_.tld || \"com\"\r\n    };\r\n    var e = null;\r\n    [opts.from, opts.to].forEach(function (lang) {\r\n        if (lang && !languages_1.isSupported(lang)) {\r\n            e = new Error();\r\n            e.message = \"The language '\" + lang + \"' is not supported\";\r\n        }\r\n    });\r\n    if (e) {\r\n        return new Promise(function (resolve, reject) {\r\n            reject(e);\r\n        });\r\n    }\r\n    return token(text)\r\n        .then(function (token) {\r\n        var _a;\r\n        var url = \"https://translate.google.\" + opts.tld + \"/translate_a/single\";\r\n        var data = (_a = {\r\n                client: \"gtx\",\r\n                sl: languages_1.getCode(opts.from),\r\n                tl: languages_1.getCode(opts.to),\r\n                hl: languages_1.getCode(opts.to),\r\n                dt: [\"at\", \"bd\", \"ex\", \"ld\", \"md\", \"qca\", \"rw\", \"rm\", \"ss\", \"t\"],\r\n                ie: \"UTF-8\",\r\n                oe: \"UTF-8\",\r\n                otf: 1,\r\n                ssel: 0,\r\n                tsel: 0,\r\n                kc: 7,\r\n                q: text\r\n            },\r\n            _a[token.name] = token.value,\r\n            _a);\r\n        var fullUrl = url + \"?\" + querystring_1.stringify(data);\r\n        /*\r\n          if (fullUrl.length > 2083) {\r\n              delete data.q;\r\n              return [\r\n                  url + '?' + stringify(data),\r\n                  {method: 'POST', body: {q: text}}\r\n              ];\r\n          }\r\n          */\r\n        return fullUrl;\r\n    })\r\n        .then(function (url) {\r\n        return axios_1.default\r\n            .get(CORSService + url)\r\n            .then(function (res_) {\r\n            var res = {\r\n                body: JSON.stringify(res_.data)\r\n            };\r\n            var result = {\r\n                text: \"\",\r\n                pronunciation: \"\",\r\n                from: {\r\n                    language: {\r\n                        didYouMean: false,\r\n                        iso: \"\"\r\n                    },\r\n                    text: {\r\n                        autoCorrected: false,\r\n                        value: \"\",\r\n                        didYouMean: false\r\n                    }\r\n                },\r\n                raw: opts.raw ? res.body : \"\"\r\n            };\r\n            var body = JSON.parse(res.body);\r\n            body[0].forEach(function (obj) {\r\n                if (obj[0]) {\r\n                    result.text += obj[0];\r\n                }\r\n                else if (obj[2]) {\r\n                    result.pronunciation += obj[2];\r\n                }\r\n            });\r\n            if (body[2] === body[8][0][0]) {\r\n                result.from.language.iso = body[2];\r\n            }\r\n            else {\r\n                result.from.language.didYouMean = true;\r\n                result.from.language.iso = body[8][0][0];\r\n            }\r\n            if (body[7] && body[7][0]) {\r\n                var str = body[7][0];\r\n                str = str.replace(/<b><i>/g, \"[\");\r\n                str = str.replace(/<\\/i><\\/b>/g, \"]\");\r\n                result.from.text.value = str;\r\n                if (body[7][5] === true) {\r\n                    result.from.text.autoCorrected = true;\r\n                }\r\n                else {\r\n                    result.from.text.didYouMean = true;\r\n                }\r\n            }\r\n            return result;\r\n        })\r\n            .catch(function (err) {\r\n            var e = new Error();\r\n            if (err.statusCode !== undefined && err.statusCode !== 200) {\r\n                e.message = \"BAD_REQUEST\";\r\n            }\r\n            else {\r\n                e.message = \"BAD_NETWORK\";\r\n            }\r\n            throw e;\r\n        });\r\n    });\r\n}\r\nexports.translate = translate;\r\nexports.default = translate;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}